.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "AMTAPE" 8 "" "" ""
.SH NAME
amtape \- user interface to AMANDA tape changer controls
.SH "SYNOPSIS"
.ad l
.hy 0
.HP 7
\fBamtape\fR \fIconfig\fR \fIcommand\fR [\fIcommand\fR\ \fIoptions\fR]
.ad
.hy

.SH "DESCRIPTION"

.PP
\fBAmtape\fR performs tape changer control operations\&. It uses the underlying tape changer script defined by the \fBtpchanger\fR option for a particular \fBAMANDA\fR configuration as specified by the \fBconfig\fR argument\&.

.PP
Tape changers maintain a notion of the \fBcurrent\fR and \fBnext\fR slot for each configuration\&. These may or may not correspond to an actual physical state of the device, but do tend to minimize searching through the tape storage slots\&. If the desired tape is in the current slot, it is likely the next tape needed is in the next slot rather than at some random position in the storage slots\&.

.PP
See the \fBamanda\fR(8) man page for more details about \fBAMANDA\fR\&.

.SH "COMMANDS"

.TP
\fBreset\fR
Reset the tape changer to a known state\&. The \fBcurrent\fR slot is set to the \fBfirst\fR slot\&. Other device\-specific side effects may occur\&. Some gravity stackers need to be reset to the top position by hand\&. This command notifies \fBAMANDA\fR the stacker is back in that position\&.

.TP
\fBeject\fR
If a tape is loaded in the drive, it is ejected and returned to the slot from which it was loaded\&.

.TP
\fBclean\fR
If a cleaning tape is defined for the changer, it is used to clean the drive\&.

.TP
\fBshow\fR
Show the contents of all slots\&. This can be slow\&.

.TP
\fBlabel\fR \fBlabel\fR
Search for and load the \fBAMANDA\fR tape with label \fBlabel\fR\&.

.TP
\fBtaper\fR
Perform the \fBtaper\fR scan algorithm\&. Load the next tape in the configuration's tape sequence, or a fresh tape with a suitable label\&.

.TP
\fBdevice\fR
Display the name of the current tape device on \fBstdout\fR\&.

.TP
\fBcurrent\fR
Display the current slot\&.

.TP
\fBupdate\fR
Update the changer label database, if it has one, to match the tapes now available\&.

.TP
\fBslot\fR \fBslot\fR
Eject any tape in the drive and put it away, then load the tape from slot \fBslot\fR and reset \fBcurrent\fR\&.

.TP
\fBslot current\fR
Eject any tape in the drive and put it away, then load the tape from the current slot\&.

.TP
\fBslot prev\fR
Eject any tape in the drive and put it away, then load the tape from the previous slot and reset \fBcurrent\fR\&.

.TP
\fBslot next\fR
Eject any tape in the drive and put it away, then load the tape from the next slot and reset \fBcurrent\fR\&.

.TP
\fBslot first\fR
Eject any tape in the drive and put it away, then load the tape from the first slot and reset \fBcurrent\fR\&.

.TP
\fBslot last\fR
Eject any tape in the drive and put it away, then load the tape from the last slot and reset \fBcurrent\fR\&.

.TP
\fBslot advance\fR
Eject any tape in the drive and put it away\&. Advance \fBcurrent\fR to the next tape, but do not load it\&.

.PP
This is useful with non\-gravity stackers to unload the last tape used and set up \fBAMANDA\fR for the next run\&. If you just use \fBeject\fR, the current tape will be mounted again in the next run, where it will be rejected as being still in use, ejected and the next tape requested\&. Using \fBslot next\fR followed by \fBeject\fR does an unnecessary mount\&.

.PP
Note: most changers optimize the \fBslot\fR commands to not eject the loaded tape if it is the one being requested\&.

.SH "AUTHOR"

.PP
James da Silva, <jds@amanda\&.org> : Original text

.PP
Stefan G\&. Weichinger, <sgw@amanda\&.org>, maintainer of the \fBAMANDA\fR\-documentation: XML\-conversion

.SH "SEE ALSO"

.PP
\fBamanda\fR(8)

